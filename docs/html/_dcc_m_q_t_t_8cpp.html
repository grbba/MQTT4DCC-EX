<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DCC-EX MQTT: mqtt4dcc++ex/src/Transport/MQTT/DccMQTT.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="dccex-stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Dccpplogov2.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DCC-EX MQTT
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">MQTT support for the DCC-EX command station for model railroading</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_dcc_m_q_t_t_8cpp.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">DccMQTT.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>MQTT protocol controller for DCC-EX. Sets up and maintains the connection to the MQTT broker incl setting up the topics. Topics are created specifically for the command station on which the code runs. Manages subsriptions as well as recieving/sending of messages on the different topics.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;Arduino.h&gt;</code><br />
<code>#include &lt;ArduinoJson.h&gt;</code><br />
<code>#include &lt;PubSubClient.h&gt;</code><br />
<code>#include &lt;avr/pgmspace.h&gt;</code><br />
<code>#include &lt;<a class="el" href="_d_i_a_g_8h_source.html">Diag/DIAG.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="_dcc_telemetry_8h_source.html">Diag/Telemetry/DccTelemetry.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="_e_t_h_network_8h_source.html">ETHNetwork/ETHNetwork.h</a>&gt;</code><br />
<code>#include &lt;Ethernet.h&gt;</code><br />
<code>#include &lt;ArduinoUniqueID.h&gt;</code><br />
<code>#include &lt;<a class="el" href="_dcc_m_q_t_t_8h_source.html">Transport/MQTT/DccMQTT.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="_dcc_m_q_t_t_proc_8h_source.html">Transport/MQTT/DccMQTTProc.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="_dcc_m_q_t_t_command_msg_8h_source.html">Transport/MQTT/DccMQTTCommandMsg.h</a>&gt;</code><br />
<code>#include &lt;DCCEXParser.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for DccMQTT.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="_dcc_m_q_t_t_8cpp__incl.png" border="0" usemap="#mqtt4dcc_09_09ex_2src_2_transport_2_m_q_t_t_2_dcc_m_q_t_t_8cpp" alt=""/></div>
<map name="mqtt4dcc_09_09ex_2src_2_transport_2_m_q_t_t_2_dcc_m_q_t_t_8cpp" id="mqtt4dcc_09_09ex_2src_2_transport_2_m_q_t_t_2_dcc_m_q_t_t_8cpp">
<area shape="rect" title="MQTT protocol controller for DCC&#45;EX. Sets up and maintains the connection to the MQTT broker incl set..." alt="" coords="653,5,839,47"/>
<area shape="rect" title=" " alt="" coords="94,177,171,203"/>
<area shape="rect" title=" " alt="" coords="285,95,391,121"/>
<area shape="rect" title=" " alt="" coords="220,177,333,203"/>
<area shape="rect" title=" " alt="" coords="783,95,898,121"/>
<area shape="rect" href="_d_i_a_g_8h.html" title=" " alt="" coords="923,95,1020,121"/>
<area shape="rect" href="_dcc_telemetry_8h.html" title=" " alt="" coords="5,95,209,121"/>
<area shape="rect" href="_e_t_h_network_8h.html" title=" " alt="" coords="1045,95,1234,121"/>
<area shape="rect" title=" " alt="" coords="1217,177,1299,203"/>
<area shape="rect" title=" " alt="" coords="1309,95,1441,121"/>
<area shape="rect" href="_dcc_m_q_t_t_8h.html" title="MQTT protocol controller for DCC&#45;EX. Sets up and maintains the connection to the MQTT broker incl set..." alt="" coords="517,95,709,121"/>
<area shape="rect" href="_dcc_m_q_t_t_command_msg_8h.html" title=" " alt="" coords="358,169,601,211"/>
<area shape="rect" title=" " alt="" coords="741,177,860,203"/>
<area shape="rect" href="_dcc_m_q_t_t_proc_8h.html" title=" " alt="" coords="1466,95,1687,121"/>
<area shape="rect" title=" " alt="" coords="1055,177,1178,203"/>
<area shape="rect" href="_memory_free_8h.html" title=" " alt="" coords="893,177,1031,203"/>
<area shape="rect" title=" " alt="" coords="625,177,717,203"/>
<area shape="rect" title=" " alt="" coords="1545,177,1608,203"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a364484d526627eede3022ff4a285f842"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_dcc_m_q_t_t_8cpp.html#a364484d526627eede3022ff4a285f842">MAXTBUF</a>&#160;&#160;&#160;50</td></tr>
<tr class="memdesc:a364484d526627eede3022ff4a285f842"><td class="mdescLeft">&#160;</td><td class="mdescRight">max length of the buffer for building the topic name ;to be checked  <a href="_dcc_m_q_t_t_8cpp.html#a364484d526627eede3022ff4a285f842">More...</a><br /></td></tr>
<tr class="separator:a364484d526627eede3022ff4a285f842"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf4dc99f00d3eaaeb1bfc340a1b36312"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_dcc_m_q_t_t_8cpp.html#abf4dc99f00d3eaaeb1bfc340a1b36312">MAXTMSG</a>&#160;&#160;&#160;80</td></tr>
<tr class="memdesc:abf4dc99f00d3eaaeb1bfc340a1b36312"><td class="mdescLeft">&#160;</td><td class="mdescRight">max length of the messages for a topic ;to be checked PROGMEM ?  <a href="_dcc_m_q_t_t_8cpp.html#abf4dc99f00d3eaaeb1bfc340a1b36312">More...</a><br /></td></tr>
<tr class="separator:abf4dc99f00d3eaaeb1bfc340a1b36312"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c0076fbfdc545e2ac37a31abb1ca948"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_dcc_m_q_t_t_8cpp.html#a1c0076fbfdc545e2ac37a31abb1ca948">MAXTSTR</a>&#160;&#160;&#160;30</td></tr>
<tr class="memdesc:a1c0076fbfdc545e2ac37a31abb1ca948"><td class="mdescLeft">&#160;</td><td class="mdescRight">max length of a topic string  <a href="_dcc_m_q_t_t_8cpp.html#a1c0076fbfdc545e2ac37a31abb1ca948">More...</a><br /></td></tr>
<tr class="separator:a1c0076fbfdc545e2ac37a31abb1ca948"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7527150b7170f26f22f6903401596dc2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_dcc_m_q_t_t_8cpp.html#a7527150b7170f26f22f6903401596dc2">CLOUDBROKER</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:a7527150b7170f26f22f6903401596dc2"><td class="mdescLeft">&#160;</td><td class="mdescRight">select the broker to which to connect; 1 is the cloud broker local machine otherwise; IP address needs updating accordingly  <a href="_dcc_m_q_t_t_8cpp.html#a7527150b7170f26f22f6903401596dc2">More...</a><br /></td></tr>
<tr class="separator:a7527150b7170f26f22f6903401596dc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8da4bdd90d82e2a8498f3fb429fed744"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_dcc_m_q_t_t_8cpp.html#a8da4bdd90d82e2a8498f3fb429fed744">MQTT_BROKER_PORT</a>&#160;&#160;&#160;9883</td></tr>
<tr class="separator:a8da4bdd90d82e2a8498f3fb429fed744"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae82d81b8eaac49580b09531fb1241043"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_dcc_m_q_t_t_8cpp.html#ae82d81b8eaac49580b09531fb1241043">MQTT_BROKER_DOMAIN</a>&#160;&#160;&#160;&quot;tb.modelrailroad.ovh&quot;</td></tr>
<tr class="separator:ae82d81b8eaac49580b09531fb1241043"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e10a14c90577250e029121ec6d3ba51"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_dcc_m_q_t_t_8cpp.html#a5e10a14c90577250e029121ec6d3ba51">MQTT_BROKER_ADDRESS</a>&#160;&#160;&#160;51, 210, 151, 143</td></tr>
<tr class="separator:a5e10a14c90577250e029121ec6d3ba51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b5ac334d3af89d8288594557f23f618"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_dcc_m_q_t_t_8cpp.html#a3b5ac334d3af89d8288594557f23f618">PUB_RES_FMT</a>&#160;&#160;&#160;&quot;{\&quot;cid\&quot;:\&quot;%s\&quot;, \&quot;result\&quot;:\&quot;%d\&quot;}&quot;</td></tr>
<tr class="separator:a3b5ac334d3af89d8288594557f23f618"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a6f06b273defaebb581fdf1adc8969f40"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_dcc_m_q_t_t_8cpp.html#a6f06b273defaebb581fdf1adc8969f40">mqttCallback</a> (char *topic, byte *payload, unsigned int length)</td></tr>
<tr class="memdesc:a6f06b273defaebb581fdf1adc8969f40"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback executed upon reception of a message by the PubSubClient.  <a href="_dcc_m_q_t_t_8cpp.html#a6f06b273defaebb581fdf1adc8969f40">More...</a><br /></td></tr>
<tr class="separator:a6f06b273defaebb581fdf1adc8969f40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a815cbdfc36a029f51427ca429c515f74"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_dcc_m_q_t_t_8cpp.html#a815cbdfc36a029f51427ca429c515f74">dccmqttCommandHandler</a> (char *<a class="el" href="_dcc_m_q_t_t_8cpp.html#a922b8e879b3d3208383bdbf15ac104d5">topicName</a>, char *<a class="el" href="_dcc_m_q_t_t_8cpp.html#a627e3f73961c67faf9b024c799da9bda">topicMessage</a>)</td></tr>
<tr class="separator:a815cbdfc36a029f51427ca429c515f74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bc1235782d4ae6db36a1727b24c8db7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_dcc_m_q_t_t_8cpp.html#a8bc1235782d4ae6db36a1727b24c8db7">setMsgParams</a> (int mdix, <a class="el" href="_dcc_m_q_t_t_command_msg_8h.html#acaed7d3152c9c62c6c16554bdb1c4c93">Parameters</a> p, uint16_t v)</td></tr>
<tr class="memdesc:a8bc1235782d4ae6db36a1727b24c8db7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the parameters in the pool item to be send to the processor.  <a href="_dcc_m_q_t_t_8cpp.html#a8bc1235782d4ae6db36a1727b24c8db7">More...</a><br /></td></tr>
<tr class="separator:a8bc1235782d4ae6db36a1727b24c8db7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa05a69a06f9c1fba7e03ec2c1d54df3c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_dcc_m_q_t_t_8cpp.html#aa05a69a06f9c1fba7e03ec2c1d54df3c">setMsgParamsByObj</a> (int mdix, <a class="el" href="_dcc_m_q_t_t_command_msg_8h.html#acaed7d3152c9c62c6c16554bdb1c4c93">Parameters</a> p, JsonObject v, bool mandatory)</td></tr>
<tr class="memdesc:aa05a69a06f9c1fba7e03ec2c1d54df3c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the parameters in the pool item to be send to the processor.  <a href="_dcc_m_q_t_t_8cpp.html#aa05a69a06f9c1fba7e03ec2c1d54df3c">More...</a><br /></td></tr>
<tr class="separator:aa05a69a06f9c1fba7e03ec2c1d54df3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f5e65aa55c2d0d6ca4c23a89f873840"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_dcc_m_q_t_t_8cpp.html#a0f5e65aa55c2d0d6ca4c23a89f873840">validateParam</a> (<a class="el" href="_dcc_m_q_t_t_command_msg_8h.html#acaed7d3152c9c62c6c16554bdb1c4c93">Parameters</a> p, uint16_t v)</td></tr>
<tr class="memdesc:a0f5e65aa55c2d0d6ca4c23a89f873840"><td class="mdescLeft">&#160;</td><td class="mdescRight">Validates permitted values for Parameters.  <a href="_dcc_m_q_t_t_8cpp.html#a0f5e65aa55c2d0d6ca4c23a89f873840">More...</a><br /></td></tr>
<tr class="separator:a0f5e65aa55c2d0d6ca4c23a89f873840"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36abf2513bb07fda8d11d30b77648182"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_dcc_m_q_t_t_8cpp.html#a36abf2513bb07fda8d11d30b77648182">getPGMkeyword</a> (const char *k)</td></tr>
<tr class="memdesc:a36abf2513bb07fda8d11d30b77648182"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves a keyword from PROGMEM.  <a href="_dcc_m_q_t_t_8cpp.html#a36abf2513bb07fda8d11d30b77648182">More...</a><br /></td></tr>
<tr class="separator:a36abf2513bb07fda8d11d30b77648182"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1b11e01987beda81471cbecb903c1c7"><td class="memItemLeft" align="right" valign="top">IPAddress&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_dcc_m_q_t_t_8cpp.html#ab1b11e01987beda81471cbecb903c1c7">server</a> (<a class="el" href="_dcc_m_q_t_t_8h.html#a5e10a14c90577250e029121ec6d3ba51">MQTT_BROKER_ADDRESS</a>)</td></tr>
<tr class="memdesc:ab1b11e01987beda81471cbecb903c1c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">This should go to a config define and also support uris like tb.modelrailraod.ovh ...  <a href="_dcc_m_q_t_t_8cpp.html#ab1b11e01987beda81471cbecb903c1c7">More...</a><br /></td></tr>
<tr class="separator:ab1b11e01987beda81471cbecb903c1c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18e15522dd78764c518fd5526cc2d446"><td class="memItemLeft" align="right" valign="top">PubSubClient&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_dcc_m_q_t_t_8cpp.html#a18e15522dd78764c518fd5526cc2d446">mqttClient</a> (<a class="el" href="_dcc_m_q_t_t_8cpp.html#a2a65545cb474469b22d80319e302a2f8">ethClient</a>)</td></tr>
<tr class="separator:a18e15522dd78764c518fd5526cc2d446"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1904f854f9998a47c16408358ce64e30"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_dcc_m_q_t_t_8cpp.html#a1904f854f9998a47c16408358ce64e30">array_to_string</a> (byte array[], unsigned int len, char buffer[])</td></tr>
<tr class="memdesc:a1904f854f9998a47c16408358ce64e30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copies an array to a string; used for generating the unique Arduino ID.  <a href="_dcc_m_q_t_t_8cpp.html#a1904f854f9998a47c16408358ce64e30">More...</a><br /></td></tr>
<tr class="separator:a1904f854f9998a47c16408358ce64e30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d2232131f8b715cc3f811a2b529a787"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_dcc_m_q_t_t_command_msg_8h.html#a1939e90743463fb34c8c571ec0590430">Commands</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_dcc_m_q_t_t_8cpp.html#a8d2232131f8b715cc3f811a2b529a787">resolveCommand</a> (const char *c)</td></tr>
<tr class="memdesc:a8d2232131f8b715cc3f811a2b529a787"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maps a command recieved from the JSON string to the corresponding enum value.  <a href="_dcc_m_q_t_t_8cpp.html#a8d2232131f8b715cc3f811a2b529a787">More...</a><br /></td></tr>
<tr class="separator:a8d2232131f8b715cc3f811a2b529a787"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a260f1ac8684c86f149cae2b21d5b13b1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_dcc_m_q_t_t_8h.html#afa16d8a9edfbfab71b7c7cf96569a84c">DccTopics</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_dcc_m_q_t_t_8cpp.html#a260f1ac8684c86f149cae2b21d5b13b1">resolveTopics</a> (const char *c)</td></tr>
<tr class="separator:a260f1ac8684c86f149cae2b21d5b13b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52087ca26705c0c3e2e3e442f0636a25"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_dcc_m_q_t_t_command_msg_8h.html#acaed7d3152c9c62c6c16554bdb1c4c93">Parameters</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_dcc_m_q_t_t_8cpp.html#a52087ca26705c0c3e2e3e442f0636a25">resolveParameters</a> (char *c)</td></tr>
<tr class="memdesc:a52087ca26705c0c3e2e3e442f0636a25"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maps parameters names recieved from the JSON string to the corresponding enum value.  <a href="_dcc_m_q_t_t_8cpp.html#a52087ca26705c0c3e2e3e442f0636a25">More...</a><br /></td></tr>
<tr class="separator:a52087ca26705c0c3e2e3e442f0636a25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e7eb46df7f7bd3a4a950d9eb3ad9c2f"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_dcc_m_q_t_t_8cpp.html#a0e7eb46df7f7bd3a4a950d9eb3ad9c2f">resolveParameters</a> (<a class="el" href="_dcc_m_q_t_t_command_msg_8h.html#acaed7d3152c9c62c6c16554bdb1c4c93">Parameters</a> p)</td></tr>
<tr class="memdesc:a0e7eb46df7f7bd3a4a950d9eb3ad9c2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maps Parameters enum values to the corresponding string.  <a href="_dcc_m_q_t_t_8cpp.html#a0e7eb46df7f7bd3a4a950d9eb3ad9c2f">More...</a><br /></td></tr>
<tr class="separator:a0e7eb46df7f7bd3a4a950d9eb3ad9c2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac158871b61933966d6d98d79c2f65e30"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_dcc_m_q_t_t_8cpp.html#ac158871b61933966d6d98d79c2f65e30">reconnect</a> ()</td></tr>
<tr class="memdesc:ac158871b61933966d6d98d79c2f65e30"><td class="mdescLeft">&#160;</td><td class="mdescRight">in case we lost the connection to the MQTT broker try to restablish a conection  <a href="_dcc_m_q_t_t_8cpp.html#ac158871b61933966d6d98d79c2f65e30">More...</a><br /></td></tr>
<tr class="separator:ac158871b61933966d6d98d79c2f65e30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a7d4738a0cfa00a37b4d53f082c0375"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_dcc_m_q_t_t_8cpp.html#a4a7d4738a0cfa00a37b4d53f082c0375">buildTopicID</a> (char c, <a class="el" href="_dcc_m_q_t_t_8h.html#afa16d8a9edfbfab71b7c7cf96569a84c">DccTopics</a> t)</td></tr>
<tr class="memdesc:a4a7d4738a0cfa00a37b4d53f082c0375"><td class="mdescLeft">&#160;</td><td class="mdescRight">builds the topic strings for the intents together with the unique ID and the Ressource letter  <a href="_dcc_m_q_t_t_8cpp.html#a4a7d4738a0cfa00a37b4d53f082c0375">More...</a><br /></td></tr>
<tr class="separator:a4a7d4738a0cfa00a37b4d53f082c0375"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a922b8e879b3d3208383bdbf15ac104d5"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_dcc_m_q_t_t_8cpp.html#a922b8e879b3d3208383bdbf15ac104d5">topicName</a> [<a class="el" href="_dcc_m_q_t_t_8cpp.html#a364484d526627eede3022ff4a285f842">MAXTBUF</a>]</td></tr>
<tr class="separator:a922b8e879b3d3208383bdbf15ac104d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a627e3f73961c67faf9b024c799da9bda"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_dcc_m_q_t_t_8cpp.html#a627e3f73961c67faf9b024c799da9bda">topicMessage</a> [<a class="el" href="_dcc_m_q_t_t_8cpp.html#abf4dc99f00d3eaaeb1bfc340a1b36312">MAXTMSG</a>]</td></tr>
<tr class="separator:a627e3f73961c67faf9b024c799da9bda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05e8d735819ea34dbc627f0443cc996a"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_dcc_m_q_t_t_8cpp.html#a05e8d735819ea34dbc627f0443cc996a">keyword</a> [<a class="el" href="_dcc_m_q_t_t_8h.html#ab53577bb9f395740323a9c03d19b9a8a">MAX_KEYWORD_LENGTH</a>]</td></tr>
<tr class="separator:a05e8d735819ea34dbc627f0443cc996a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a65545cb474469b22d80319e302a2f8"><td class="memItemLeft" align="right" valign="top">EthernetClient&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_dcc_m_q_t_t_8cpp.html#a2a65545cb474469b22d80319e302a2f8">ethClient</a> = <a class="el" href="class_e_t_h_network.html#aad4d6535ea4dcdf07a42d0f1a376fa3f">ETHNetwork::getServer</a>().available()</td></tr>
<tr class="separator:a2a65545cb474469b22d80319e302a2f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a139ed27bd234a932b10f4e66c387d49c"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_dcc_m_q_t_t_8cpp.html#a139ed27bd234a932b10f4e66c387d49c">_deviceId</a> [<a class="el" href="_dcc_m_q_t_t_8h.html#a881258fce424df363d3100d830f76f1d">MAXDEVICEID</a>]</td></tr>
<tr class="memdesc:a139ed27bd234a932b10f4e66c387d49c"><td class="mdescLeft">&#160;</td><td class="mdescRight">string holding the device id  <a href="_dcc_m_q_t_t_8cpp.html#a139ed27bd234a932b10f4e66c387d49c">More...</a><br /></td></tr>
<tr class="separator:a139ed27bd234a932b10f4e66c387d49c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace4e6b6288f1bc5261032a72c05f15c3"><td class="memItemLeft" align="right" valign="top">StaticJsonDocument&lt; <a class="el" href="_dcc_m_q_t_t_8cpp.html#abf4dc99f00d3eaaeb1bfc340a1b36312">MAXTMSG</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_dcc_m_q_t_t_8cpp.html#ace4e6b6288f1bc5261032a72c05f15c3">doc</a></td></tr>
<tr class="separator:ace4e6b6288f1bc5261032a72c05f15c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89f8c20fe59c59a2ea542957168934f3"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_dcc_m_q_t_t_8cpp.html#a89f8c20fe59c59a2ea542957168934f3">midx</a></td></tr>
<tr class="separator:a89f8c20fe59c59a2ea542957168934f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2475a9c17f9629efd6634f468ffc2c06"><td class="memItemLeft" align="right" valign="top">DCCEXParser&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_dcc_m_q_t_t_8cpp.html#a2475a9c17f9629efd6634f468ffc2c06">mqttDccExParser</a></td></tr>
<tr class="separator:a2475a9c17f9629efd6634f468ffc2c06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3441477749ad3fe4af0d326a259ad1a9"><td class="memItemLeft" align="right" valign="top">PROGMEM const char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_dcc_m_q_t_t_8cpp.html#a3441477749ad3fe4af0d326a259ad1a9">resfmt</a> [] = {<a class="el" href="_dcc_m_q_t_t_8cpp.html#a3b5ac334d3af89d8288594557f23f618">PUB_RES_FMT</a>}</td></tr>
<tr class="separator:a3441477749ad3fe4af0d326a259ad1a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>MQTT protocol controller for DCC-EX. Sets up and maintains the connection to the MQTT broker incl setting up the topics. Topics are created specifically for the command station on which the code runs. Manages subsriptions as well as recieving/sending of messages on the different topics. </p>
<dl class="section author"><dt>Author</dt><dd>Gregor Baues </dd></dl>
<dl class="section version"><dt>Version</dt><dd>0.1 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2020-07-08</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (c) 2020</dd></dl>
<p>This is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.</p>
<p>It is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details <a href="https://www.gnu.org/licenses/">https://www.gnu.org/licenses/</a>. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a7527150b7170f26f22f6903401596dc2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7527150b7170f26f22f6903401596dc2">&#9670;&nbsp;</a></span>CLOUDBROKER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CLOUDBROKER&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>select the broker to which to connect; 1 is the cloud broker local machine otherwise; IP address needs updating accordingly </p>

</div>
</div>
<a id="a364484d526627eede3022ff4a285f842"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a364484d526627eede3022ff4a285f842">&#9670;&nbsp;</a></span>MAXTBUF</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAXTBUF&#160;&#160;&#160;50</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>max length of the buffer for building the topic name ;to be checked </p>

</div>
</div>
<a id="abf4dc99f00d3eaaeb1bfc340a1b36312"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf4dc99f00d3eaaeb1bfc340a1b36312">&#9670;&nbsp;</a></span>MAXTMSG</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAXTMSG&#160;&#160;&#160;80</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>max length of the messages for a topic ;to be checked PROGMEM ? </p>

</div>
</div>
<a id="a1c0076fbfdc545e2ac37a31abb1ca948"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c0076fbfdc545e2ac37a31abb1ca948">&#9670;&nbsp;</a></span>MAXTSTR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAXTSTR&#160;&#160;&#160;30</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>max length of a topic string </p>

</div>
</div>
<a id="a5e10a14c90577250e029121ec6d3ba51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e10a14c90577250e029121ec6d3ba51">&#9670;&nbsp;</a></span>MQTT_BROKER_ADDRESS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MQTT_BROKER_ADDRESS&#160;&#160;&#160;51, 210, 151, 143</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ae82d81b8eaac49580b09531fb1241043"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae82d81b8eaac49580b09531fb1241043">&#9670;&nbsp;</a></span>MQTT_BROKER_DOMAIN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MQTT_BROKER_DOMAIN&#160;&#160;&#160;&quot;tb.modelrailroad.ovh&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a8da4bdd90d82e2a8498f3fb429fed744"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8da4bdd90d82e2a8498f3fb429fed744">&#9670;&nbsp;</a></span>MQTT_BROKER_PORT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MQTT_BROKER_PORT&#160;&#160;&#160;9883</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a3b5ac334d3af89d8288594557f23f618"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b5ac334d3af89d8288594557f23f618">&#9670;&nbsp;</a></span>PUB_RES_FMT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PUB_RES_FMT&#160;&#160;&#160;&quot;{\&quot;cid\&quot;:\&quot;%s\&quot;, \&quot;result\&quot;:\&quot;%d\&quot;}&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a1904f854f9998a47c16408358ce64e30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1904f854f9998a47c16408358ce64e30">&#9670;&nbsp;</a></span>array_to_string()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void array_to_string </td>
          <td>(</td>
          <td class="paramtype">byte&#160;</td>
          <td class="paramname"><em>array</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>buffer</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Copies an array to a string; used for generating the unique Arduino ID. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">array</td><td>array containing bytes </td></tr>
    <tr><td class="paramname">len</td><td>length of the array </td></tr>
    <tr><td class="paramname">buffer</td><td>buffer to which the string will be written; make sure the buffer has appropriate length </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4a7d4738a0cfa00a37b4d53f082c0375"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a7d4738a0cfa00a37b4d53f082c0375">&#9670;&nbsp;</a></span>buildTopicID()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* buildTopicID </td>
          <td>(</td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_dcc_m_q_t_t_8h.html#afa16d8a9edfbfab71b7c7cf96569a84c">DccTopics</a>&#160;</td>
          <td class="paramname"><em>t</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>builds the topic strings for the intents together with the unique ID and the Ressource letter </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td>char for specific chnalle under the intent; if '_' it will not be used </td></tr>
    <tr><td class="paramname">t</td><td>index for the topic in the list of topics </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>char* of the topic string build </dd></dl>

</div>
</div>
<a id="a815cbdfc36a029f51427ca429c515f74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a815cbdfc36a029f51427ca429c515f74">&#9670;&nbsp;</a></span>dccmqttCommandHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dccmqttCommandHandler </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>topicName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>topicMessage</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000005">Todo:</a></b></dt><dd>Read on Main (M or P; All will try to read on P) </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000006">Todo:</a></b></dt><dd>else found none or incorrect bit parameter; in case of none continue in case of wrong return </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000007">Todo:</a></b></dt><dd>implement throttle commands </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000008">Todo:</a></b></dt><dd>implement fn commands </dd></dl>

</div>
</div>
<a id="a36abf2513bb07fda8d11d30b77648182"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36abf2513bb07fda8d11d30b77648182">&#9670;&nbsp;</a></span>getPGMkeyword()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * getPGMkeyword </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>k</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves a keyword from PROGMEM. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">k</td><td>keyword to retrieve </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>char* string copied into SRAM </dd></dl>

</div>
</div>
<a id="a6f06b273defaebb581fdf1adc8969f40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f06b273defaebb581fdf1adc8969f40">&#9670;&nbsp;</a></span>mqttCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mqttCallback </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte *&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback executed upon reception of a message by the PubSubClient. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">topic</td><td>topic string </td></tr>
    <tr><td class="paramname">payload</td><td>serialized content of the message </td></tr>
    <tr><td class="paramname">length</td><td>length of the recieved message </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a18e15522dd78764c518fd5526cc2d446"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18e15522dd78764c518fd5526cc2d446">&#9670;&nbsp;</a></span>mqttClient()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PubSubClient mqttClient </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_dcc_m_q_t_t_8cpp.html#a2a65545cb474469b22d80319e302a2f8">ethClient</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac158871b61933966d6d98d79c2f65e30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac158871b61933966d6d98d79c2f65e30">&#9670;&nbsp;</a></span>reconnect()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void reconnect </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>in case we lost the connection to the MQTT broker try to restablish a conection </p>

</div>
</div>
<a id="a8d2232131f8b715cc3f811a2b529a787"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d2232131f8b715cc3f811a2b529a787">&#9670;&nbsp;</a></span>resolveCommand()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_dcc_m_q_t_t_command_msg_8h.html#a1939e90743463fb34c8c571ec0590430">Commands</a> resolveCommand </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maps a command recieved from the JSON string to the corresponding enum value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td>string containing the command </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Commands enum value from the Command enum </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Returns</td><td>an INVALID_C - invalid command for unknown Commands send </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="_dcc_m_q_t_t_command_msg_8h.html#a1939e90743463fb34c8c571ec0590430" title="Defines all the commands which can be send via MQTT messages.">Commands</a> </dd></dl>

</div>
</div>
<a id="a52087ca26705c0c3e2e3e442f0636a25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52087ca26705c0c3e2e3e442f0636a25">&#9670;&nbsp;</a></span>resolveParameters() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_dcc_m_q_t_t_command_msg_8h.html#acaed7d3152c9c62c6c16554bdb1c4c93">Parameters</a> resolveParameters </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maps parameters names recieved from the JSON string to the corresponding enum value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td>string containing the parameter name </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>parameters enum value from the Parameter enum </dd></dl>

</div>
</div>
<a id="a0e7eb46df7f7bd3a4a950d9eb3ad9c2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e7eb46df7f7bd3a4a950d9eb3ad9c2f">&#9670;&nbsp;</a></span>resolveParameters() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* resolveParameters </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_dcc_m_q_t_t_command_msg_8h.html#acaed7d3152c9c62c6c16554bdb1c4c93">Parameters</a>&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maps Parameters enum values to the corresponding string. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p</td><td>: Enum value of the Parameter </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>const char* </dd></dl>

</div>
</div>
<a id="a260f1ac8684c86f149cae2b21d5b13b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a260f1ac8684c86f149cae2b21d5b13b1">&#9670;&nbsp;</a></span>resolveTopics()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_dcc_m_q_t_t_8h.html#afa16d8a9edfbfab71b7c7cf96569a84c">DccTopics</a> resolveTopics </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ab1b11e01987beda81471cbecb903c1c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1b11e01987beda81471cbecb903c1c7">&#9670;&nbsp;</a></span>server()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">IPAddress server </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_dcc_m_q_t_t_8h.html#a5e10a14c90577250e029121ec6d3ba51">MQTT_BROKER_ADDRESS</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This should go to a config define and also support uris like tb.modelrailraod.ovh ... </p>

</div>
</div>
<a id="a8bc1235782d4ae6db36a1727b24c8db7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8bc1235782d4ae6db36a1727b24c8db7">&#9670;&nbsp;</a></span>setMsgParams()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool setMsgParams </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mdix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_dcc_m_q_t_t_command_msg_8h.html#acaed7d3152c9c62c6c16554bdb1c4c93">Parameters</a>&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>v</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the parameters in the pool item to be send to the processor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mdix</td><td>: Index of the pool item </td></tr>
    <tr><td class="paramname">p</td><td>: Parameter to be set </td></tr>
    <tr><td class="paramname">v</td><td>: Value of the parameter </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true </dd>
<dd>
false the value is 0 return false </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000009">Todo:</a></b></dt><dd>what about valid values of 0 here e.g. speed ? or power off ?</dd></dl>

</div>
</div>
<a id="aa05a69a06f9c1fba7e03ec2c1d54df3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa05a69a06f9c1fba7e03ec2c1d54df3c">&#9670;&nbsp;</a></span>setMsgParamsByObj()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool setMsgParamsByObj </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mdix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_dcc_m_q_t_t_command_msg_8h.html#acaed7d3152c9c62c6c16554bdb1c4c93">Parameters</a>&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">JsonObject&#160;</td>
          <td class="paramname"><em>v</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>mandatory</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the parameters in the pool item to be send to the processor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mdix</td><td>: Index of the pool item </td></tr>
    <tr><td class="paramname">p</td><td>: Parameter to be set </td></tr>
    <tr><td class="paramname">v</td><td>: Value of the parameter </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true </dd>
<dd>
false the value is 0 return false </dd></dl>

</div>
</div>
<a id="a0f5e65aa55c2d0d6ca4c23a89f873840"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f5e65aa55c2d0d6ca4c23a89f873840">&#9670;&nbsp;</a></span>validateParam()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool validateParam </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_dcc_m_q_t_t_command_msg_8h.html#acaed7d3152c9c62c6c16554bdb1c4c93">Parameters</a>&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>v</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Validates permitted values for Parameters. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p</td><td>: Parameter </td></tr>
    <tr><td class="paramname">v</td><td>: value to validate for the given Parameter </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true : if value is allowed </dd>
<dd>
false : false if value is not allowed </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a139ed27bd234a932b10f4e66c387d49c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a139ed27bd234a932b10f4e66c387d49c">&#9670;&nbsp;</a></span>_deviceId</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char _deviceId[<a class="el" href="_dcc_m_q_t_t_8h.html#a881258fce424df363d3100d830f76f1d">MAXDEVICEID</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>string holding the device id </p>

</div>
</div>
<a id="ace4e6b6288f1bc5261032a72c05f15c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace4e6b6288f1bc5261032a72c05f15c3">&#9670;&nbsp;</a></span>doc</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">StaticJsonDocument&lt;<a class="el" href="_dcc_m_q_t_t_8cpp.html#abf4dc99f00d3eaaeb1bfc340a1b36312">MAXTMSG</a>&gt; doc</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a2a65545cb474469b22d80319e302a2f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a65545cb474469b22d80319e302a2f8">&#9670;&nbsp;</a></span>ethClient</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EthernetClient ethClient = <a class="el" href="class_e_t_h_network.html#aad4d6535ea4dcdf07a42d0f1a376fa3f">ETHNetwork::getServer</a>().available()</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a05e8d735819ea34dbc627f0443cc996a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05e8d735819ea34dbc627f0443cc996a">&#9670;&nbsp;</a></span>keyword</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char keyword[<a class="el" href="_dcc_m_q_t_t_8h.html#ab53577bb9f395740323a9c03d19b9a8a">MAX_KEYWORD_LENGTH</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a89f8c20fe59c59a2ea542957168934f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89f8c20fe59c59a2ea542957168934f3">&#9670;&nbsp;</a></span>midx</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t midx</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a2475a9c17f9629efd6634f468ffc2c06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2475a9c17f9629efd6634f468ffc2c06">&#9670;&nbsp;</a></span>mqttDccExParser</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DCCEXParser mqttDccExParser</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a3441477749ad3fe4af0d326a259ad1a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3441477749ad3fe4af0d326a259ad1a9">&#9670;&nbsp;</a></span>resfmt</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PROGMEM const char resfmt[] = {<a class="el" href="_dcc_m_q_t_t_8cpp.html#a3b5ac334d3af89d8288594557f23f618">PUB_RES_FMT</a>}</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a627e3f73961c67faf9b024c799da9bda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a627e3f73961c67faf9b024c799da9bda">&#9670;&nbsp;</a></span>topicMessage</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char topicMessage[<a class="el" href="_dcc_m_q_t_t_8cpp.html#abf4dc99f00d3eaaeb1bfc340a1b36312">MAXTMSG</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a922b8e879b3d3208383bdbf15ac104d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a922b8e879b3d3208383bdbf15ac104d5">&#9670;&nbsp;</a></span>topicName</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char topicName[<a class="el" href="_dcc_m_q_t_t_8cpp.html#a364484d526627eede3022ff4a285f842">MAXTBUF</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_ec42efdab9561e661da1f75b005d9028.html">mqtt4dcc++ex</a></li><li class="navelem"><a class="el" href="dir_302314e4386c27c9ed42b9b7d045dc4e.html">src</a></li><li class="navelem"><a class="el" href="dir_a66fa4ce9e2bbe44a30452b10a69db06.html">Transport</a></li><li class="navelem"><a class="el" href="dir_f71fbbcb014bb7c05c354104e401ed5d.html">MQTT</a></li><li class="navelem"><a class="el" href="_dcc_m_q_t_t_8cpp.html">DccMQTT.cpp</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.18 </li>
  </ul>
</div>
</body>
</html>
